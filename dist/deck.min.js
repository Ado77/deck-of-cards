"use strict";var Deck=function(){function t(t){if("undefined"!=typeof x[t])return x[t];if("undefined"!=typeof m[t])return x[t]=t,t;for(var n,e=t[0].toUpperCase()+t.slice(1),o=["webkit","moz","Moz","ms","o"],i=0,u=o.length;u>i;i++)if(n=o[i]+e,"undefined"!=typeof m[n])return x[t]=n,n}function n(t,n,e){return e=e||0,b?"translate3d("+t+", "+n+", "+e+")":"translate("+t+", "+n+")"}function e(t){var n=Math.round(Math.random())?-1:1;return n*t}function o(t){for(var n,e,o=t.length-1;o;o--)n=Math.random()*o|0,e=t[o],t[o]=t[n],t[n]=e;return t}function i(){return window.getComputedStyle(document.body).getPropertyValue("font-size").slice(0,-2)}function u(t){return document.createElement(t)}function r(e){function o(t){t.card&&t.card(L)}function i(t){function e(t){$&&("mousemove"===t.type?(u.x=t.clientX,u.y=t.clientY):(u.x=t.touches[0].clientX,u.y=t.touches[0].clientY),k.style[p]="",k.style[m]=n(Math.round(L.x+u.x-i.x)+"px",Math.round(L.y+u.y-i.y)+"px"))}function o(t){q&&Date.now()-r<200&&L.setSide("front"===L.side?"back":"front"),$&&("mouseup"===t.type?(a(window,"mousemove",e),a(window,"mouseup",o)):(a(window,"touchmove",e),a(window,"touchend",o)),k.style[p]="",L.x=L.x+u.x-i.x,L.y=L.y+u.y-i.y)}var i={},u={},r=Date.now();t.preventDefault(),"mousedown"===t.type?(i.x=u.x=t.clientX,i.y=u.y=t.clientY,s(window,"mousemove",e),s(window,"mouseup",o)):(i.x=u.x=t.touches[0].clientX,i.y=u.y=t.touches[0].clientY,s(window,"touchmove",e),s(window,"touchend",o)),$&&(k.style[p]="all .2s",k.style[m]=n(L.x+"px",L.y+"px"),k.style[x]="50% 50%",k.style.zIndex=I++)}function r(t){t.appendChild(k),L.$root=t}function f(){L.$root&&L.$root.removeChild(k),L.$root=null}function l(t){"front"===t?("back"===L.side&&k.removeChild(E),L.side="front",k.appendChild(z),k.appendChild(C),k.appendChild(T),k.classList.add("card",g,g+v)):("front"===L.side&&(k.removeChild(z),k.removeChild(C),k.removeChild(T)),L.side="back",k.appendChild(E),k.setAttribute("class","card"))}var d,p=t("transition"),m=t("transform"),x=t("transformOrigin"),v=e%13+1,h=1===v?"A":11===v?"J":12===v?"Q":13===v?"K":v,b=e/13|0,g=c(b),w=(52-e)/4,k=u("div"),C=u("div"),T=u("div"),z=u("div"),E=u("div"),$=!1,q=!1,L={i:e,value:v,suit:b,pos:e,$el:k,mount:r,unmount:f,setSide:l},M=y.modules;k.classList.add("card",g,g+v),C.classList.add("topleft"),T.classList.add("bottomright"),z.classList.add("face"),E.classList.add("back"),C.textContent=4>b?h:"J\nO\nK\nE\nR",T.textContent=4>b?h:"J\nO\nK\nE\nR",k.style.zIndex=52-e,k.style[m]="translate(-"+w+"px, -"+w+"px)",L.setSide("back"),s(k,"mousedown",i),s(k,"touchstart",i);for(d in M)o(M[d]);return L.enableMoving=function(){$||($=!0,k.style.cursor="move")},L.enableFlipping=function(){q||(q=!0)},L.disableFlipping=function(){q&&(q=!1)},L.disableMoving=function(){$&&($=!1,k.style.cursor="")},L}function c(t){return 0===t?"spades":1===t?"hearts":2===t?"clubs":3===t?"diamonds":"joker"}function s(t,n,e){t.addEventListener(n,e)}function a(t,n,e){t.removeEventListener(n,e)}function f(t){return"cubicInOut"===t?"cubic-bezier(0.645, 0.045, 0.355, 1.000)":void 0}function l(t){function n(t){return function(){var n=this,o=arguments;e(function(e){t.apply(n,i.concat.apply(e,o))})}}function e(t){t&&(u.push(t),1===u.length&&o())}function o(){u[0](function(t){if(t)throw t;u=u.slice(1),u.length&&o()})}var i=Array.prototype,u=[];return t.queue=e,t.queued=n,t}function d(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}t||(t={});var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function y(t){function n(t){i=t,i.appendChild(a)}function e(){i.removeChild(a)}function o(t){t.deck&&t.deck(f)}var i,c,s=new Array(t?55:52),a=u("div"),f=d({mount:n,unmount:e,cards:s,$el:a}),p=y.modules;l(f);for(c in p)o(p[c]);a.classList.add("deck");for(var m,x=0,v=s.length;v>x;x++)m=s[x]=r(x),m.mount(a);return f}var p={deck:function(t){function n(n){var e=t.cards.filter(function(t){return"front"===t.side}).length/t.cards.length;t.cards.forEach(function(t,n){t.setSide(e>.5?"back":"front")}),n()}t.flip=t.queued(n)}},m=document.createElement("p").style,x={},v=t("transform"),h=document.createElement("p");document.body.appendChild(h),h.style[v]="translate3d(1px,1px,1px)";var b=h.style[v];b=null!=b&&b.length&&"none"!==b,document.body.removeChild(h);var g,w,k,C={deck:function(t){function n(n,e){var o=t.cards;o.sort(function(t,n){return e?t.i-n.i:n.i-t.i}),o.forEach(function(t,i){t.sort(i,function(t){t===o.length-1&&n()},e)})}t.sort=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=e.$el;e.sort=function(t,r,c){var s=t/4,a=10*t;setTimeout(function(){u.style[i]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",u.style[o]=n(-s+"px","-150px"),e.x=-s,e.y=-150},a),setTimeout(function(){u.style.zIndex=t},200+a),setTimeout(function(){u.style[o]=n(-s+"px",-s+"px"),e.x=-s,e.y=-s,setTimeout(function(){u.style[i]="",r(t)},500)},400+a)}}},T={deck:function(t){function n(n){var e=t.cards;g=i(),o(e),e.forEach(function(t,o){t.pos=o,t.shuffle(function(t){t===e.length-1&&n()})})}t.shuffle=t.queued(n)},card:function(o){var i=t("transform"),u=t("transition"),r=t("transition-delay"),c=o.$el;o.shuffle=function(t){var s=o.pos,a=s/4,f=e(40*Math.random()+20)*g/16,l=2*s;c.style[u]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)",c.style[r]=l/1e3+"s",setTimeout(function(){c.style[i]=n(f+"px",-a+"px"),o.x=f,o.y=-a},0),setTimeout(function(){c.style[r]="",c.style.zIndex=s},100+l),setTimeout(function(){c.style[i]=n(-a+"px",-a+"px"),o.x=-a,o.y=-a,setTimeout(function(){c.style[u]="",t(s)},200)},200+l)}}},z={deck:function(t){function n(n){var e=t.cards,o=e.length;w=i(),e.slice(-5).reverse().forEach(function(t,e){t.poker(e,o,function(e){t.setSide("front"),4===e&&n()})})}t.poker=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=e.$el;e.poker=function(t,r,c){var s=250*t,a={x:70*(t-2.05)*w/16,y:-110*w/16};setTimeout(function(){u.style.zIndex=r-1+t},s),setTimeout(function(){u.style[i]="all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)",u.style[o]=n(a.x+"px",a.y+"px"),e.x=a.x,e.y=a.y},s+25),setTimeout(function(){u.style[i]="",c(t)},s+250)}}},E={deck:function(t){function n(n){var e=t.cards;e.forEach(function(t,o){t.setSide("front"),t.intro(o,function(o){setTimeout(function(){t.setSide("back")},500),o===e.length-1&&n()})})}t.intro=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=t("transition-delay"),r=e.$el;e.intro=function(t,c){var s=10*t+250,a=t/4;r.style[o]=n(-a+"px","-250px"),r.style.opacity=0,r.style.zIndex=t,e.x=-a,e.y=-250,setTimeout(function(){r.style[i]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",r.style[u]=s/1e3+"s",r.style[o]=n(-a+"px",-a+"px"),r.style.opacity=1,e.x=-a,e.y=-a,setTimeout(function(){r.style[i]="",c&&c(t)},1250+s)},500)}}},$={deck:function(t){function n(n){var e=t.cards,o=e.length;e.forEach(function(t,i){t.fan(i,o,function(t){t===e.length-1&&n()})})}t.fan=t.queued(n)},card:function(e){var o=t("transform"),i=t("transform-origin"),u=t("transition"),r=t("transition-delay"),c=e.$el;e.fan=function(t,s,a){var f=t/4,l=10*t,d=t/(s-1)*260-130;c.style[i]="50% 110%",setTimeout(function(){c.style[u]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",c.style[r]=l/1e3+"s",c.style[o]=n(-f+"px",-f+"px"),c.style.zIndex=t,e.x=-f,e.y=-f,setTimeout(function(){c.style[r]="",c.style[o]=n(0,0)+"rotate("+d+"deg)",e.x=0,e.y=0},300+l)},0),setTimeout(function(){a(t)},1e3+l)}}},q={deck:function(t){function n(n){var e=t.cards;k=i(),e.forEach(function(t){t.bysuit(function(t){t===e.length-1&&n()})})}t.bysuit=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=t("transition-delay"),r=e.value,c=e.suit,s=e.$el;e.bysuit=function(t){var a=e.i,f=10*a,l=8*-(6.75-r)*k/16,d=92*-(1.5-c)*k/16;setTimeout(function(){s.style[i]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",s.style[u]=f/1e3+"s",s.style[o]=n(l+"px",d+"px"),s.style.zIndex=a,e.x=l,e.y=d,setTimeout(function(){s.style[i]="",t(a)},500+f)},0)}}},I=52;return y.modules={bysuit:q,fan:$,intro:E,poker:z,shuffle:T,sort:C,flip:p},y.Card=r,y.easing=f,y.prefix=t,y.translate=n,y}();