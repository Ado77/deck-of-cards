"use strict";var Deck=function(){function t(t){if("undefined"!=typeof k[t])return k[t];if("undefined"!=typeof g[t])return k[t]=t,t;for(var n,e=t[0].toUpperCase()+t.slice(1),o=["webkit","moz","Moz","ms","o"],i=0,u=o.length;u>i;i++)if(n=o[i]+e,"undefined"!=typeof g[n])return k[t]=n,n}function n(t,n,o){return"undefined"!=typeof m||(m=e()),o=o||0,m?"translate3d("+t+", "+n+", "+o+")":"translate("+t+", "+n+")"}function e(){var n=t("transform"),e=document.createElement("p");document.body.appendChild(e),e.style[n]="translate3d(1px,1px,1px)",m=e.style[n],m=null!=m&&m.length&&"none"!==m,document.body.removeChild(e)}function o(t){var n=Math.round(Math.random())?-1:1;return n*t}function i(t){for(var n,e,o=t.length-1;o;o--)n=Math.random()*o|0,e=t[o],t[o]=t[n],t[n]=e;return t}function u(){return window.getComputedStyle(document.body).getPropertyValue("font-size").slice(0,-2)}function r(t){return document.createElement(t)}function c(e){function o(t){t.card&&t.card(S)}function i(t){function e(t){E&&("mousemove"===t.type?(u.x=t.clientX,u.y=t.clientY):(u.x=t.touches[0].clientX,u.y=t.touches[0].clientY),k.style[y]="",k.style[m]=n(Math.round(S.x+u.x-i.x)+"px",Math.round(S.y+u.y-i.y)+"px"))}function o(t){M&&Date.now()-r<200&&S.setSide("front"===S.side?"back":"front"),E&&("mouseup"===t.type?(f(window,"mousemove",e),f(window,"mouseup",o)):(f(window,"touchmove",e),f(window,"touchend",o)),k.style[y]="",S.x=S.x+u.x-i.x,S.y=S.y+u.y-i.y)}var i={},u={},r=Date.now();t.preventDefault(),"mousedown"===t.type?(i.x=u.x=t.clientX,i.y=u.y=t.clientY,a(window,"mousemove",e),a(window,"mouseup",o)):(i.x=u.x=t.touches[0].clientX,i.y=u.y=t.touches[0].clientY,a(window,"touchmove",e),a(window,"touchend",o)),E&&(k.style[y]="all .2s",k.style[m]=n(S.x+"px",S.y+"px"),k.style[x]="50% 50%",k.style.zIndex=$++)}function u(t){t.appendChild(k),S.$root=t}function c(){S.$root&&S.$root.removeChild(k),S.$root=null}function l(t){"front"===t?("back"===S.side&&k.removeChild(z),S.side="front",k.appendChild(T),k.appendChild(w),k.appendChild(C),S.setRankSuit(S.rank,S.suit)):("front"===S.side&&(k.removeChild(T),k.removeChild(w),k.removeChild(C)),S.side="back",k.appendChild(z),k.setAttribute("class","card"))}var d,y=t("transition"),m=t("transform"),x=t("transformOrigin"),h=e%13+1,v=1===h?"A":11===h?"J":12===h?"Q":13===h?"K":h,b=e/13|0,g=(52-e)/4,k=r("div"),w=r("div"),C=r("div"),T=r("div"),z=r("div"),E=!1,M=!1,S={i:e,rank:h,suit:b,pos:e,$el:k,mount:u,unmount:c,setSide:l},q=p.modules;w.classList.add("topleft"),C.classList.add("bottomright"),T.classList.add("face"),z.classList.add("back"),k.style.zIndex=52-e,k.style[m]="translate(-"+g+"px, -"+g+"px)",S.x=-g,S.y=-g,S.setSide("back"),a(k,"mousedown",i),a(k,"touchstart",i);for(d in q)o(q[d]);return S.setRankSuit=function(t,n){var e=s(n);k.setAttribute("class","card "+e+" "+(e+t)),w.textContent=4>n?v:"J\nO\nK\nE\nR",C.textContent=4>n?v:"J\nO\nK\nE\nR"},S.setRankSuit(h,b),S.enableMoving=function(){E||(E=!0,k.style.cursor="move")},S.enableFlipping=function(){M||(M=!0)},S.disableFlipping=function(){M&&(M=!1)},S.disableMoving=function(){E&&(E=!1,k.style.cursor="")},S}function s(t){return 0===t?"spades":1===t?"hearts":2===t?"clubs":3===t?"diamonds":"joker"}function a(t,n,e){t.addEventListener(n,e)}function f(t,n,e){t.removeEventListener(n,e)}function l(t){return"cubicInOut"===t?"cubic-bezier(0.645, 0.045, 0.355, 1.000)":void 0}function d(t){function n(t){return function(){var n=this,o=arguments;e(function(e){t.apply(n,i.concat.apply(e,o))})}}function e(t){t&&(u.push(t),1===u.length&&o())}function o(){u[0](function(t){if(t)throw t;u=u.slice(1),u.length&&o()})}var i=Array.prototype,u=[];return t.queue=e,t.queued=n,t}function y(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}t||(t={});var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function p(t){function n(t){i=t,i.appendChild(a)}function e(){i.removeChild(a)}function o(t){t.deck&&t.deck(f)}var i,u,s=new Array(t?55:52),a=r("div"),f=y({mount:n,unmount:e,cards:s,$el:a}),l=p.modules;d(f);for(u in l)o(l[u]);a.classList.add("deck");for(var m,x=0,h=s.length;h>x;x++)m=s[x]=c(x),m.mount(a);return f}var m,x,h,v,b={deck:function(t){function n(n){var e=t.cards.filter(function(t){return"front"===t.side}).length/t.cards.length;t.cards.forEach(function(t,n){t.setSide(e>.5?"back":"front")}),n()}t.flip=t.queued(n)}},g=document.createElement("p").style,k={},w={deck:function(t){function n(n,e){var o=t.cards;o.sort(function(t,n){return e?t.i-n.i:n.i-t.i}),o.forEach(function(t,i){t.sort(i,function(t){t===o.length-1&&n()},e)})}t.sort=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=e.$el;e.sort=function(t,r,c){var s=t/4,a=10*t;setTimeout(function(){u.style[i]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",u.style[o]=n(-s+"px","-150px"),e.x=-s,e.y=-150},a),setTimeout(function(){u.style.zIndex=t},200+a),setTimeout(function(){u.style[o]=n(-s+"px",-s+"px"),e.x=-s,e.y=-s,setTimeout(function(){u.style[i]="",r(t)},500)},400+a)}}},C={deck:function(t){function n(n){var e=t.cards;x=u(),i(e),e.forEach(function(t,o){t.pos=o,t.shuffle(function(t){t===e.length-1&&n()})})}t.shuffle=t.queued(n)},card:function(e){var i=t("transform"),u=t("transition"),r=t("transition-delay"),c=e.$el;e.shuffle=function(t){var s=e.pos,a=s/4,f=o(40*Math.random()+20)*x/16,l=2*s;c.style[u]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)",c.style[r]=l/1e3+"s",setTimeout(function(){c.style[i]=n(f+"px",-a+"px"),e.x=f,e.y=-a},0),setTimeout(function(){c.style[r]="",c.style.zIndex=s},100+l),setTimeout(function(){c.style[i]=n(-a+"px",-a+"px"),e.x=-a,e.y=-a,setTimeout(function(){c.style[u]="",t(s)},200)},200+l)}}},T={deck:function(t){function n(n){var e=t.cards,o=e.length;h=u(),e.slice(-5).reverse().forEach(function(t,e){t.poker(e,o,function(e){t.setSide("front"),4===e&&n()})})}t.poker=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=e.$el;e.poker=function(t,r,c){var s=250*t,a={x:Math.round(70*(t-2.05)*h/16),y:Math.round(-110*h/16)};setTimeout(function(){u.style.zIndex=r-1+t},s),setTimeout(function(){u.style[i]="all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)",u.style[o]=n(a.x+"px",a.y+"px"),e.x=a.x,e.y=a.y},s+25),setTimeout(function(){u.style[i]="",c(t)},s+250)}}},z={deck:function(t){function n(n){var e=t.cards;e.forEach(function(t,o){t.setSide("front"),t.intro(o,function(o){setTimeout(function(){t.setSide("back")},500),o===e.length-1&&n()})})}t.intro=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=t("transition-delay"),r=e.$el;e.intro=function(t,c){var s=10*t+250,a=t/4;r.style[o]=n(-a+"px","-250px"),r.style.opacity=0,r.style.zIndex=t,e.x=-a,e.y=-250,setTimeout(function(){r.style[i]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",r.style[u]=s/1e3+"s",r.style[o]=n(-a+"px",-a+"px"),r.style.opacity=1,e.x=-a,e.y=-a,setTimeout(function(){r.style[i]="",c&&c(t)},1250+s)},500)}}},E={deck:function(t){function n(n){var e=t.cards,o=e.length;e.forEach(function(t,i){t.fan(i,o,function(t){t===e.length-1&&n()})})}t.fan=t.queued(n)},card:function(e){var o=t("transform"),i=t("transform-origin"),u=t("transition"),r=t("transition-delay"),c=e.$el;e.fan=function(t,s,a){var f=t/4,l=10*t,d=t/(s-1)*260-130;c.style[i]="50% 110%",setTimeout(function(){c.style[u]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",c.style[r]=l/1e3+"s",c.style[o]=n(-f+"px",-f+"px"),c.style.zIndex=t,e.x=-f,e.y=-f,setTimeout(function(){c.style[r]="",c.style[o]=n(0,0)+"rotate("+d+"deg)",e.x=0,e.y=0},300+l)},0),setTimeout(function(){a(t)},1e3+l)}}},M={deck:function(t){function n(n){var e=t.cards;v=u(),e.forEach(function(t){t.bysuit(function(t){t===e.length-1&&n()})})}t.bysuit=t.queued(n)},card:function(e){var o=t("transform"),i=t("transition"),u=t("transition-delay"),r=e.rank,c=e.suit,s=e.$el;e.bysuit=function(t){var a=e.i,f=10*a,l=-Math.round(8*(6.75-r)*v/16),d=-Math.round(92*(1.5-c)*v/16);setTimeout(function(){s.style[i]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",s.style[u]=f/1e3+"s",s.style[o]=n(l+"px",d+"px"),s.style.zIndex=a,e.x=l,e.y=d,setTimeout(function(){s.style[i]="",t(a)},500+f)},0)}}},$=52;return p.modules={bysuit:M,fan:E,intro:z,poker:T,shuffle:C,sort:w,flip:b},p.Card=c,p.easing=l,p.prefix=t,p.translate=n,p}();